{% extends 'base.html' %}

{% block app_content %}
<h1>Endless Farming</h1>
<div class="row super-row">
	<div class="col-6 col-centered padding-0">
		<table class="table table-hover" id="myTable">
			<tbody>
			{% for key, pet in pet_priority.items() %}
			  	<tr id="{{key}}">
			  		<td align="center"><img id="gem-image" src="../static/{{pets[pet]['img']}}">{{pet}}</td>
			  	</tr>
			{% endfor %}
			</tbody>
		</table>
	</div>
</div>
{% endblock %} 

{% block scripts %}
	{{ super() }}
<script type="text/javascript">
	(function(yourcode) {

        yourcode(window.jQuery, window.indexedDB, window, document);

    }(function($, indexedDB, window, document) {
        $(function() {
        	var fixHelperModified = function(e, tr) {
				var $originals = tr.children();
				var $helper = tr.clone();
				$helper.children().each(function(index) {
					$(this).width($originals.eq(index).width())
				});
				return $helper;
				},
				updateIndex = function(e, ui) {
					$('td.index', ui.item.parent()).each(function (i) {
						$(this).html(i + 1);
					});
				};

			$("#myTable tbody").sortable({
				helper: fixHelperModified,
				stop: updateIndex
			}).disableSelection();
	
			$("tbody").sortable({
				distance: 5,
				delay: 100,
				opacity: 0.6,
				cursor: 'move',
				update: function() {}
			});
        });
    }));
</script>
{% endblock %} 